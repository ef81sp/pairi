"use strict";var $=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var W=(e,t)=>{for(var r in t)$(e,r,{get:t[r],enumerable:!0})},X=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of U(t))!V.call(e,n)&&n!==r&&$(e,n,{get:()=>t[n],enumerable:!(s=Q(t,n))||s.enumerable});return e};var Y=e=>X($({},"__esModule",{value:!0}),e);var yt={};W(yt,{\u526F\u9732:()=>R,\u624B\u724C:()=>q,\u724C:()=>m});module.exports=Y(yt);var R=class{call;called\u724C;other\u724C;from;constructor({call:t,called\u724C:r,other\u724C:s,from:n}){this.call=t,this.called\u724C=r,this.other\u724C=s,this.from=n}to\u724CList(){return this.other\u724C[2]?[this.called\u724C,this.other\u724C[0],this.other\u724C[1],this.other\u724C[2]]:[this.called\u724C,this.other\u724C[0],this.other\u724C[1]]}};var g=e=>{switch(e){case 1:return 1;case 4:return 2;case 7:return 3;case 10:return 4;case 13:return 5;default:throw new Error(`invalid count\u724C: ${e}`)}};var m=class e{suit;number;is\u8D64\u724C;str\u724C;constructor(t,r=!1){let{suit:s,number:n}=Z(t);this.suit=s,this.number=n,this.is\u8D64\u724C=s==="z"?!1:n===5&&r,this.str\u724C=t}toString(){return this.str\u724C}toEqual(t){return this.str\u724C===t.str\u724C}clone(){return new e(this.str\u724C,this.is\u8D64\u724C)}},Z=e=>{if(e.length!==2)throw new Error(`invalid signature ${e}: length must be 2.`);let t=Number(e[0]),r=e[1],s=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,n=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,i=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6 or 7.`;if(!Number.isInteger(t))throw new Error(s);if(r===void 0||!["m","p","s","z"].includes(r))throw new Error(`invalid signature ${e}: suit must be "m", "p", "s" or "z".`);if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))throw new Error(n);return{suit:r,number:t}}if(!(1<=t&&t<=7))throw new Error(i);return{suit:r,number:t}},f=e=>{if(e.length!==2)return!1;let t=Number(e[0]),r=e[1];if(!Number.isInteger(t)||r===void 0||!["m","p","s","z"].includes(r))return!1;if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))return!1}else if(!(1<=t&&t<=7))return!1;return!0};var b=e=>e.component[0].toEqual(e.component[1])&&e.component[0].toEqual(e.component[2]);var N=(e,t)=>t===0?tt(e):et(e),k=e=>{let t=[];for(let r of h(e.rest))e.\u5BFE\u5B50.some(s=>s.component.some(n=>n.toEqual(r)))||t.push(r.clone());return t},C=e=>{let t=["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"].map(r=>new m(r));return e.\u4E48\u4E5D\u724Crest.length===0?t:t.filter(r=>!e.\u4E48\u4E5D\u724Cunique.some(s=>s.toEqual(r)))},tt=e=>{if(e.\u5854\u5B50.length>=2)throw new Error("\u5854\u5B50\u304C2\u500B\u4EE5\u4E0A\u3042\u308B\u5834\u5408\u306F\u8074\u724C\u3067\u306F\u306A\u3044");if(e.\u96C0\u982D){if(e.\u5854\u5B50[0]===void 0)throw new Error("\u96C0\u982D\u304C\u3042\u3063\u3066\u5854\u5B50\u304C\u306A\u3044\u5834\u5408\u306F\u30C6\u30F3\u30D1\u30A4\u3067\u306F\u306A\u3044");return j(e.\u5854\u5B50[0])}let t=h(e.rest)[0];if(t===void 0)throw new Error(`invalid rest: ${e.rest}`);let r=t.toString();return[new m(r)]},et=e=>{let t=[],r=g(v(e))-1,s=e.\u9762\u5B50.length+e.\u5854\u5B50.length;for(let o of e.\u5854\u5B50)t.push(...j(o));let n=h(e.rest);if(s<r){for(let o of n)t.push(...rt(o,e.\u96C0\u982D,e.\u9762\u5B50));e.\u96C0\u982D&&!n.some(o=>e.\u96C0\u982D?.component[0].toEqual(o))&&t.push(e.\u96C0\u982D.component[0].clone())}if(!e.\u96C0\u982D){if(s===r)t.push(...n.filter(o=>!I(o,e.\u96C0\u982D,e.\u9762\u5B50)));else if(s>r)for(let o of e.\u5854\u5B50)t.push(...o.component.map(u=>u.clone()))}return t.filter((o,u)=>t.findIndex(l=>l.toEqual(o))===u).sort((o,u)=>o.suit===u.suit?o.number-u.number:o.suit.charCodeAt(0)-u.suit.charCodeAt(0))},h=e=>Object.values(e).flat(),j=e=>{let[t,r]=e.component;switch(!0){case t.number===r.number:return[t.clone()];case(t.number===1&&r.number===2):return[new m(`3${t.suit}`)];case(t.number===8&&r.number===9):return[new m(`7${t.suit}`)];case t.number===r.number-2:{let s=`${t.number+1}${t.suit}`;if(!f(s))throw new Error(`invalid \u724Cstr: ${s}`);return[new m(s)]}case t.number===r.number-1:{let s=`${t.number-1}${t.suit}`,n=`${r.number+1}${r.suit}`;if(!f(s))throw new Error(`invalid \u724Cstr: ${s}`);if(!f(n))throw new Error(`invalid \u724Cstr: ${n}`);return[new m(s),new m(n)]}default:throw new Error(`invalid \u5854\u5B50: ${e.component[0].toString()} ${e.component[1].toString()}`)}},rt=(e,t,r)=>{let s=[1,2,3,4,5,6,7,8,9],n=r.filter(i=>i.component[0].toEqual(i.component[1]));switch(e.suit){case"m":case"p":case"s":{let i=s.indexOf(e.number),o=Math.max(0,i-2),u=Math.min(8,i+2);return s.slice(o,u+1).map(a=>{let c=`${a}${e.suit}`;if(!f(c))throw new Error(`invalid str: ${c}`);return new m(c)}).filter(a=>!I(a,t,n))}case"z":return I(e,t,n)?[]:[e.clone()]}};function I(e,t,r){return!!(t?.component[0].toEqual(e)||r.filter(s=>b(s)).some(s=>s.component[0].toEqual(e)))}var v=e=>{let t=0;return e.\u96C0\u982D&&(t+=2),t+=e.\u9762\u5B50.length*3,t+=e.\u5854\u5B50.length*2,t+=h(e.rest).length,t};var d=e=>{try{let t=g(v(e)),r=t-1,{\u96C0\u982D:s,\u9762\u5B50:n,\u5854\u5B50:i,rest:o}=e,u=h(o),l=8;if(l-=(5-t)*2,l-=n.length*2,l-=i.length,l-=s?1:0,n.length+i.length>=t&&(l+=1),s&&i.some(a=>a.component[0].toEqual(a.component[1])&&a.component[0].toEqual(s.component[0]))&&(l+=1),!s&&n.length===r&&u.length===1){let a=u[0];a&&n.some(c=>b(c)&&c.component[0].toEqual(a))&&(l+=1)}return l}catch(t){throw console.dir(e,{depth:null}),t}},O=e=>{let t=6-e.\u5BFE\u5B50.length,r=h(e.rest).filter((s,n,i)=>i.findIndex(o=>o.toString()===s.toString())===n);for(let s of r)e.\u5BFE\u5B50.some(n=>n.component[0].toEqual(s))&&(t+=1);return t},P=e=>e.\u4E48\u4E5D\u724Crest.length===0?13-e.\u4E48\u4E5D\u724Cunique.length:12-e.\u4E48\u4E5D\u724Cunique.length;var st={},L=(e,t)=>{let r=new Map(e.map(s=>[s.toString(),{\u724C:s,remains:4}]));for(let s of t){let n=r.get(s.toString());n&&(n.remains-=1)}return r};st.vitest&&test("\u5168\u67AF\u308C",()=>{let e=L([new m("1m")],[new m("1m"),new m("1m"),new m("1m"),new m("1m")]);expect(e.get("1m")).toEqual({\u724C:new m("1m"),remains:0})});var T=(e,t,r)=>{nt(e);let{suit:s,index:n}=r;switch(t){case"\u96C0\u982D":{let i=e[s][n],o=e[s][n+1];return i&&o?A(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u96C0\u982D",component:[i,o]},rest:{...e,[s]:e[s].filter((a,c)=>c!==n&&c!==n+1)}}:{status:"failure"}:{status:"failure"}}case"\u9762\u5B50":{let i=e[s][n],o=e[s][n+1],u=e[s][n+2];return i&&o&&u?it(i,o,u)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u9762\u5B50",component:[i,o,u]},rest:{...e,[s]:e[s].filter((c,x)=>x!==n&&x!==n+1&&x!==n+2)}}:ot(e,r):{status:"failure"}}case"\u5854\u5B50":{let i=e[s][n],o=e[s][n+1];return i&&o?A(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[i,o]},rest:{...e,[s]:e[s].filter((a,c)=>c!==n&&c!==n+1)}}:ut(e,r):{status:"failure"}}case"\u5BFE\u5B50":{let i=e[s][n],o=e[s][n+1];return i&&o?A(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5BFE\u5B50",component:[i,o]},rest:{...e,[s]:e[s].filter((a,c)=>c!==n&&c!==n+1)}}:{status:"failure"}:{status:"failure"}}default:throw new Error(`invalid type: ${t}`)}},nt=e=>{if(!e.m.every(t=>t.suit==="m"))throw new Error(`invalid type in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.suit==="p"))throw new Error(`invalid type in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.suit==="s"))throw new Error(`invalid type in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.suit==="z"))throw new Error(`invalid type in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`);if(!e.m.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.number>=1&&t.number<=7))throw new Error(`invalid number in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`)},A=(e,t)=>e.toEqual(t),it=(e,t,r)=>e.suit===t.suit&&t.suit===r.suit&&e.number===t.number&&t.number===r.number;var ot=(e,t)=>{let r=e[t.suit],s=r[t.index];if(s===void 0)return{status:"failure"};if(s.suit==="z")return{status:"failure"};if(s.number===8||s.number===9)return{status:"failure"};let n=`${s.number+1}${s.suit}`,i=`${s.number+2}${s.suit}`;if(!(f(n)&&f(i)))return{status:"failure"};let o={type:"\u9762\u5B50",component:[s,new m(n),new m(i)]},u=r.findIndex(a=>a.toString()===n),l=r.findIndex(a=>a.toString()===i);return u===-1||l===-1?{status:"failure"}:{status:"success",\u30D6\u30ED\u30C3\u30AF:o,rest:{...e,[t.suit]:r.filter((a,c)=>c!==t.index&&c!==u&&c!==l)}}},ut=(e,t)=>{let r=e[t.suit],s=r[t.index];if(s===void 0)return{status:"failure"};if(s.suit==="z")return{status:"failure"};if(s.number===9)return{status:"failure"};let n=`${s.number+1}${s.suit}`;if(!f(n))return{status:"failure"};let i=r.findIndex(l=>l.toString()===n);if(i>=0)return{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[s,new m(n)]},rest:{...e,[t.suit]:r.filter((a,c)=>c!==t.index&&c!==i)}};let o=`${s.number+2}${s.suit}`;if(!f(o))return{status:"failure"};let u=r.findIndex(l=>l.toString()===o);return u>=0?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[s,new m(o)]},rest:{...e,[t.suit]:r.filter((a,c)=>c!==t.index&&c!==u)}}:{status:"failure"}};var E=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u9762\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=E(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t},y=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u5854\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=y(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},M=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u5BFE\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=M(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},D=e=>e.children.length===0?[{\u30D6\u30ED\u30C3\u30AF:e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF]:[],rest:e.rest}]:e.children.flatMap(D).map(s=>({\u30D6\u30ED\u30C3\u30AF:(e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF,...s.\u30D6\u30ED\u30C3\u30AF]:[...s.\u30D6\u30ED\u30C3\u30AF]).sort((n,i)=>n==null?1:i==null?-1:n.type===i.type?n.component[0].suit===i.component[0].suit?n.component[0].number-i.component[0].number:n.component[0].suit.charCodeAt(0)-i.component[0].suit.charCodeAt(0):n.type==="\u96C0\u982D"?-1:i.type==="\u96C0\u982D"?1:n.type==="\u9762\u5B50"?-1:i.type==="\u9762\u5B50"?1:n.type==="\u5854\u5B50"?-1:i.type==="\u5854\u5B50"?1:0),rest:s.rest})),p=e=>e.flatMap(D).filter((t,r,s)=>{let n=JSON.stringify(t);return s.findIndex(i=>JSON.stringify(i)===n)===r});var lt={},F=e=>{let t=[],r=B(e);for(let o of r){let u=p(E(o.rest));if(u.length>0)for(let l of u){let a=p(y(l.rest));for(let c of a){let x=J(o.\u30D6\u30ED\u30C3\u30AF,c);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:l.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:x.\u30D6\u30ED\u30C3\u30AF,rest:x.rest})}}else{let l=p(y(o.rest));for(let a of l){let c=J(o.\u30D6\u30ED\u30C3\u30AF,a);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:[],\u5854\u5B50:c.\u30D6\u30ED\u30C3\u30AF,rest:c.rest})}}}let s=t.map(o=>[d(o),o]),n=Math.min(...s.map(([o])=>o));return s.filter(([o])=>o===n).map(([,o])=>o)},J=(e,t)=>{let r={\u30D6\u30ED\u30C3\u30AF:[],rest:{m:t.rest.m.map(s=>s.clone()),p:t.rest.p.map(s=>s.clone()),s:t.rest.s.map(s=>s.clone()),z:t.rest.z.map(s=>s.clone())}};for(let s of t.\u30D6\u30ED\u30C3\u30AF){let[n,i]=s.component;n.toEqual(i)&&n.toEqual(e.component[0])?(r.rest[n.suit].push(n),r.rest[i.suit].push(i)):r.\u30D6\u30ED\u30C3\u30AF.push(s)}return r},B=e=>{let t=[];for(let n of["m","p","s","z"]){let i=e[n];for(let o=0;o<i.length;o++)t.push(T(e,"\u96C0\u982D",{suit:n,index:o}))}let r=t.filter(n=>n.status==="success");return r.filter((n,i)=>{let o=JSON.stringify(n);return r.findIndex(u=>JSON.stringify(u)===o)===i})};lt.vitest&&test("\u96C0\u982D\u62BD\u51FA",()=>{let e=B({m:["1m","1m","1m","2m","3m"].map(t=>new m(t)),p:["4p","5p","6p","6p","9p"].map(t=>new m(t)),s:["3s"].map(t=>new m(t)),z:["1z","1z"].map(t=>new m(t))});expect(e).toMatchSnapshot()});var G=e=>{let t=[],r=p(E(e));if(r.length>0)for(let u of r){let l=p(y(u.rest));for(let a of l)t.push({\u96C0\u982D:null,\u9762\u5B50:u.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:a.\u30D6\u30ED\u30C3\u30AF,rest:a.rest})}else{let u=p(y(e));for(let l of u)t.push({\u96C0\u982D:null,\u9762\u5B50:[],\u5854\u5B50:l.\u30D6\u30ED\u30C3\u30AF,rest:l.rest})}let n=t.filter(u=>!u.\u5854\u5B50.some(l=>ct(...l.component))).map(u=>[d(u),u]),i=Math.min(...n.map(([u])=>u));return n.filter(([u])=>u===i).map(([,u])=>u)},ct=(e,t)=>e.toEqual(t);var H=e=>{let t=p(M(e))[0];if(t===void 0)return{\u5BFE\u5B50:[],rest:e};let r=t.\u30D6\u30ED\u30C3\u30AF.findIndex((s,n,i)=>i.findIndex(o=>s.component[0].toString()===o.component[0].toString())!==n);if(r!==-1){let s=t.\u30D6\u30ED\u30C3\u30AF[r];if(s===void 0)throw new Error("duplicated\u5BFE\u5B50 is undefined");t.\u30D6\u30ED\u30C3\u30AF.splice(r,1),t.rest[s.component[0].suit].push(s.component[0]),t.rest[s.component[1].suit].push(s.component[1])}return{\u5BFE\u5B50:t.\u30D6\u30ED\u30C3\u30AF,rest:t.rest}},K=e=>{let t=[],r=[],s={m:[],p:[],s:[],z:[]};for(let n of["m","p","s"])for(let i of e[n])i.number===1||i.number===9?t.find(o=>o.toString()===i.toString())?r.push(i):t.push(i):s[n].push(i);for(let n of e.z)t.find(i=>i.toString()===n.toString())?r.push(n):t.push(n);return{\u4E48\u4E5D\u724Cunique:t,\u4E48\u4E5D\u724Crest:r,rest:s}};var w=e=>e.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0)),z=e=>w(e).filter((t,r,s)=>{if(r===0)return!0;let n=s[r-1];if(n===void 0)throw new Error("arr[i-1] is undefined");return!t.toEqual(n)});var S=new Map,at=(e,t)=>{if(S.set(e,t),S.size>3){let r=Array.from(S.keys());r[0]&&S.delete(r[0])}},_=(e,t)=>{let r=mt(e),s=Math.min(r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570),n=[];s===r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r._5\u30D6\u30ED\u30C3\u30AF.\u6709\u52B9\u724C),s===r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r.\u4E03\u5BFE\u5B50.\u6709\u52B9\u724C),s===r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r.\u56FD\u58EB\u7121\u53CC.\u6709\u52B9\u724C);let i=z(n),o=L(i,t);return{analysisResult:r,\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u6709\u52B9\u724C:i,remaining\u6709\u52B9\u724Cnum:o}},mt=e=>{let t=e.m.map(n=>n.toString()).join("")+e.p.map(n=>n.toString()).join("")+e.s.map(n=>n.toString()).join("")+e.z.map(n=>n.toString()).join(""),r=S.get(t);if(r)return r;let s={_5\u30D6\u30ED\u30C3\u30AF:ft(e),\u4E03\u5BFE\u5B50:pt(e),\u56FD\u58EB\u7121\u53CC:ht(e)};return at(t,s),s},ft=e=>{let t=F(e),r=G(e),s=t.length+r.length===0?8:Math.min(...[...t,...r].map(u=>d(u))),i=[...t,...r].filter(u=>d(u)===s).map(u=>({\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u30D6\u30ED\u30C3\u30AF:u,\u6709\u52B9\u724C:N(u,s)})),o=i.flatMap(u=>u.\u6709\u52B9\u724C).filter((u,l,a)=>a.findIndex(c=>c.suit===u.suit&&c.number===u.number)===l).sort((u,l)=>u.suit===l.suit?u.number-l.number:u.suit.charCodeAt(0)-l.suit.charCodeAt(0));return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u6709\u52B9\u724C:o,indivisuals:i}},pt=e=>{let t=H(e),r=O(t),s=k(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:s}},ht=e=>{let t=K(e),r=P(t),s=C(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:s}};var q=class{\u666E\u901A;\u526F\u9732=[];\u30C4\u30E2=null;analysisResult13=null;analysisResult14=null;constructor(t,r){this.\u666E\u901A=t,r&&(this.\u526F\u9732=r),this.sort(),this.analyze13()}sort(){this.\u666E\u901A.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0))}\u30DE\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="m")}\u30D4\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="p")}\u30BD\u30FC\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="s")}\u5B57\u724C(){return this.\u666E\u901A.filter(t=>t.suit==="z")}toString\u666E\u901A(){return this.\u666E\u901A.map(t=>t.toString()).join("")}do\u30C4\u30E2(t){this.\u30C4\u30E2=t,this.analyze14()}do\u526F\u9732(t){if(this.\u526F\u9732.length===4)throw new Error("\u526F\u9732\u3067\u304D\u308B\u306E\u306F4\u56DE\u307E\u3067");for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");if(!this.\u666E\u901A.some(s=>s.toEqual(r)))throw new Error(`\u624B\u724C\u306B ${r} \u304C\u306A\u3044\u306E\u306B\u526F\u9732\u3057\u3088\u3046\u3068\u3057\u305F`)}this.\u526F\u9732=[...this.\u526F\u9732,t];for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");let s=this.\u666E\u901A.findIndex(n=>n.toEqual(r));this.\u666E\u901A.splice(s,1)}this.analyze14({is\u526F\u9732\u5F8C:!0})}do\u6253\u724C(t){switch(t.type){case"\u30C4\u30E2\u5207\u308A":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");this.\u30C4\u30E2=null;break}case"\u30C4\u30E2\u5F8C\u624B\u51FA\u3057":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");let r=this.\u666E\u901A.findIndex(s=>s.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1,this.\u30C4\u30E2),this.\u30C4\u30E2=null,this.sort();break}case"\u526F\u9732\u5F8C\u624B\u51FA\u3057":{let r=this.\u666E\u901A.findIndex(s=>s.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1),this.\u30C4\u30E2=null,this.sort();break}default:throw new Error(`invalid \u6253\u724C.type: ${t}`)}this.analyze13()}getAnalysisResult13(){return this.analysisResult13}getAnalysisResult14(){return this.analysisResult14}\u724CList(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return this.\u30C4\u30E2&&t.push(this.\u30C4\u30E2),w(t)}\u724CListExcludes\u30C4\u30E2(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return w(t)}analyze13(){let t=_({m:this.\u30DE\u30F3\u30BA(),p:this.\u30D4\u30F3\u30BA(),s:this.\u30BD\u30FC\u30BA(),z:this.\u5B57\u724C()},this.\u724CList());return this.analysisResult14=null,this.analysisResult13=t,this.analysisResult13}analyze14({is\u526F\u9732\u5F8C:t}={is\u526F\u9732\u5F8C:!1}){let r=(()=>{if(t)return this.\u666E\u901A;if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B analyze14 \u3057\u3088\u3046\u3068\u3057\u305F");return w([...this.\u666E\u901A,this.\u30C4\u30E2])})(),s=z(r),n=new Map;for(let i of s){let o=r.findIndex(u=>u.toEqual(i));n.set(i.toString(),{\u6253\u724C:i,analysisResult:_(dt(r.toSpliced(o,1)),this.\u724CList())})}return this.analysisResult13=null,this.analysisResult14=n,this.analysisResult14}},dt=e=>{let t={m:[],p:[],s:[],z:[]};for(let r of e)t[r.suit].push(r);return t};0&&(module.exports={\u526F\u9732,\u624B\u724C,\u724C});
//# sourceMappingURL=index.cjs.map