var q=class{call;called\u724C;other\u724C;from;constructor({call:t,called\u724C:r,other\u724C:s,from:n}){this.call=t,this.called\u724C=r,this.other\u724C=s,this.from=n}to\u724CList(){return this.other\u724C[2]?[this.called\u724C,this.other\u724C[0],this.other\u724C[1],this.other\u724C[2]]:[this.called\u724C,this.other\u724C[0],this.other\u724C[1]]}};var l=class e{suit;number;is\u8D64\u724C;str\u724C;constructor(t,r=!1){let{suit:s,number:n}=U(t);this.suit=s,this.number=n,this.is\u8D64\u724C=s==="z"?!1:n===5&&r,this.str\u724C=t}toString(){return this.str\u724C}toEqual(t){return this.str\u724C===t.str\u724C}clone(){return new e(this.str\u724C,this.is\u8D64\u724C)}},U=e=>{if(e.length!==2)throw new Error(`invalid signature ${e}: length must be 2.`);let t=Number(e[0]),r=e[1],s=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,n=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,i=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6 or 7.`;if(!Number.isInteger(t))throw new Error(s);if(r===void 0||!["m","p","s","z"].includes(r))throw new Error(`invalid signature ${e}: suit must be "m", "p", "s" or "z".`);if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))throw new Error(n);return{suit:r,number:t}}if(!(1<=t&&t<=7))throw new Error(i);return{suit:r,number:t}},f=e=>{if(e.length!==2)return!1;let t=Number(e[0]),r=e[1];if(!Number.isInteger(t)||r===void 0||!["m","p","s","z"].includes(r))return!1;if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))return!1}else if(!(1<=t&&t<=7))return!1;return!0};var M=[new l("1m"),new l("2m"),new l("3m"),new l("4m"),new l("5m"),new l("6m"),new l("7m"),new l("8m"),new l("9m"),new l("1p"),new l("2p"),new l("3p"),new l("4p"),new l("5p"),new l("6p"),new l("7p"),new l("8p"),new l("9p"),new l("1s"),new l("2s"),new l("3s"),new l("4s"),new l("5s"),new l("6s"),new l("7s"),new l("8s"),new l("9s"),new l("1z"),new l("2z"),new l("3z"),new l("4z"),new l("5z"),new l("6z"),new l("7z")];var R=e=>{switch(e){case 1:return 1;case 4:return 2;case 7:return 3;case 10:return 4;case 13:return 5;default:throw new Error(`invalid count\u724C: ${e}`)}};var b=e=>{let t=0;return e.\u96C0\u982D&&(t+=2),t+=e.\u9762\u5B50.length*3,t+=e.\u5854\u5B50.length*2,t+=d(e.rest).length,t};var x=e=>e.component[0].toEqual(e.component[1])&&e.component[0].toEqual(e.component[2]);var _=(e,t)=>t===0?V(e):W(e),N=e=>{let t=[];for(let r of d(e.rest))e.\u5BFE\u5B50.some(s=>s.component.some(n=>n.toEqual(r)))||t.push(r.clone());return t},k=e=>{let t=["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"].map(r=>new l(r));return e.\u4E48\u4E5D\u724Crest.length===0?t:t.filter(r=>!e.\u4E48\u4E5D\u724Cunique.some(s=>s.toEqual(r)))},V=e=>{if(e.\u5854\u5B50.length>=2)throw new Error("\u5854\u5B50\u304C2\u500B\u4EE5\u4E0A\u3042\u308B\u5834\u5408\u306F\u8074\u724C\u3067\u306F\u306A\u3044");if(e.\u96C0\u982D){if(e.\u5854\u5B50[0]===void 0)throw new Error("\u96C0\u982D\u304C\u3042\u3063\u3066\u5854\u5B50\u304C\u306A\u3044\u5834\u5408\u306F\u30C6\u30F3\u30D1\u30A4\u3067\u306F\u306A\u3044");return C(e.\u5854\u5B50[0])}let t=d(e.rest)[0];if(t===void 0)throw new Error(`invalid rest: ${e.rest}`);let r=t.toString();return[new l(r)]},W=e=>{let t=[],r=R(b(e))-1,s=e.\u9762\u5B50.length+e.\u5854\u5B50.length;for(let o of e.\u5854\u5B50)t.push(...C(o));let n=d(e.rest);if(s<r){for(let o of n)t.push(...X(o,e.\u96C0\u982D,e.\u9762\u5B50));e.\u96C0\u982D&&!n.some(o=>e.\u96C0\u982D?.component[0].toEqual(o))&&t.push(e.\u96C0\u982D.component[0].clone())}if(!e.\u96C0\u982D){let o=O(e.\u9762\u5B50);if(s===r)n.every(u=>z(u,null,e.\u9762\u5B50))?t.push(...M.filter(u=>o.every(c=>!c.component[0].toEqual(u)))):t.push(...n.filter(u=>!z(u,e.\u96C0\u982D,e.\u9762\u5B50)));else if(s>r)for(let u of e.\u5854\u5B50)t.push(...u.component.filter(c=>o.every(a=>!a.component[0].toEqual(c))).map(c=>c.clone()))}return t.filter((o,u)=>t.findIndex(c=>c.toEqual(o))===u).sort((o,u)=>o.suit===u.suit?o.number-u.number:o.suit.charCodeAt(0)-u.suit.charCodeAt(0))},d=e=>Object.values(e).flat(),C=e=>{let[t,r]=e.component;switch(!0){case t.number===r.number:return[t.clone()];case(t.number===1&&r.number===2):return[new l(`3${t.suit}`)];case(t.number===8&&r.number===9):return[new l(`7${t.suit}`)];case t.number===r.number-2:{let s=`${t.number+1}${t.suit}`;if(!f(s))throw new Error(`invalid \u724Cstr: ${s}`);return[new l(s)]}case t.number===r.number-1:{let s=`${t.number-1}${t.suit}`,n=`${r.number+1}${r.suit}`;if(!f(s))throw new Error(`invalid \u724Cstr: ${s}`);if(!f(n))throw new Error(`invalid \u724Cstr: ${n}`);return[new l(s),new l(n)]}default:throw new Error(`invalid \u5854\u5B50: ${e.component[0].toString()} ${e.component[1].toString()}`)}},X=(e,t,r)=>{let s=[1,2,3,4,5,6,7,8,9],n=O(r);switch(e.suit){case"m":case"p":case"s":{let i=s.indexOf(e.number),o=Math.max(0,i-2),u=Math.min(8,i+2);return s.slice(o,u+1).map(a=>{let m=`${a}${e.suit}`;if(!f(m))throw new Error(`invalid str: ${m}`);return new l(m)}).filter(a=>!(a.toEqual(e)&&z(a,t,n)))}case"z":return z(e,t,n)?[]:[e.clone()]}};function z(e,t,r){return!!(t?.component[0].toEqual(e)||r.filter(s=>x(s)).some(s=>s.component[0].toEqual(e)))}function O(e){return e.filter(t=>x(t))}var y=e=>{let t=R(b(e)),r=t-1,{\u96C0\u982D:s,\u9762\u5B50:n,\u5854\u5B50:i,rest:o}=e,u=d(o),c=8;if(c-=(5-t)*2,c-=n.length*2,c-=i.length,c-=s?1:0,n.length+i.length>=t&&(c+=1),s&&i.some(a=>a.component[0].toEqual(a.component[1])&&a.component[0].toEqual(s.component[0]))&&(c+=1),!s&&n.length+i.length===r){let a=n.filter(m=>x(m));u.every(m=>a.some(h=>h.component[0].toEqual(m)))&&(c+=1)}return c},P=e=>{let t=6-e.\u5BFE\u5B50.length,r=d(e.rest).filter((i,o,u)=>u.findIndex(c=>c.toEqual(i))===o).map(i=>i.toString()),n=Array.from(new Set([...e.\u5BFE\u5B50.map(i=>i.component[0].toString()),...r])).length;return n<7&&(t+=7-n),t},D=e=>e.\u4E48\u4E5D\u724Crest.length===0?13-e.\u4E48\u4E5D\u724Cunique.length:12-e.\u4E48\u4E5D\u724Cunique.length;var T=(e,t,r)=>{Y(e);let{suit:s,index:n}=r;switch(t){case"\u96C0\u982D":{let i=e[s][n],o=e[s][n+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u96C0\u982D",component:[i,o]},rest:{...e,[s]:e[s].filter((a,m)=>m!==n&&m!==n+1)}}:{status:"failure"}:{status:"failure"}}case"\u9762\u5B50":{let i=e[s][n],o=e[s][n+1],u=e[s][n+2];return i&&o&&u?Z(i,o,u)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u9762\u5B50",component:[i,o,u]},rest:{...e,[s]:e[s].filter((m,h)=>h!==n&&h!==n+1&&h!==n+2)}}:tt(e,r):{status:"failure"}}case"\u5854\u5B50":{let i=e[s][n],o=e[s][n+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[i,o]},rest:{...e,[s]:e[s].filter((a,m)=>m!==n&&m!==n+1)}}:et(e,r):{status:"failure"}}case"\u5BFE\u5B50":{let i=e[s][n],o=e[s][n+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5BFE\u5B50",component:[i,o]},rest:{...e,[s]:e[s].filter((a,m)=>m!==n&&m!==n+1)}}:{status:"failure"}:{status:"failure"}}default:throw new Error(`invalid type: ${t}`)}},Y=e=>{if(!e.m.every(t=>t.suit==="m"))throw new Error(`invalid type in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.suit==="p"))throw new Error(`invalid type in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.suit==="s"))throw new Error(`invalid type in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.suit==="z"))throw new Error(`invalid type in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`);if(!e.m.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.number>=1&&t.number<=7))throw new Error(`invalid number in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`)},$=(e,t)=>e.toEqual(t),Z=(e,t,r)=>e.suit===t.suit&&t.suit===r.suit&&e.number===t.number&&t.number===r.number;var tt=(e,t)=>{let r=e[t.suit],s=r[t.index];if(s===void 0)return{status:"failure"};if(s.suit==="z")return{status:"failure"};if(s.number===8||s.number===9)return{status:"failure"};let n=`${s.number+1}${s.suit}`,i=`${s.number+2}${s.suit}`;if(!(f(n)&&f(i)))return{status:"failure"};let o={type:"\u9762\u5B50",component:[s,new l(n),new l(i)]},u=r.findIndex(a=>a.toString()===n),c=r.findIndex(a=>a.toString()===i);return u===-1||c===-1?{status:"failure"}:{status:"success",\u30D6\u30ED\u30C3\u30AF:o,rest:{...e,[t.suit]:r.filter((a,m)=>m!==t.index&&m!==u&&m!==c)}}},et=(e,t)=>{let r=e[t.suit],s=r[t.index];if(s===void 0)return{status:"failure"};if(s.suit==="z")return{status:"failure"};if(s.number===9)return{status:"failure"};let n=`${s.number+1}${s.suit}`;if(!f(n))return{status:"failure"};let i=r.findIndex(c=>c.toString()===n);if(i>=0)return{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[s,new l(n)]},rest:{...e,[t.suit]:r.filter((a,m)=>m!==t.index&&m!==i)}};let o=`${s.number+2}${s.suit}`;if(!f(o))return{status:"failure"};let u=r.findIndex(c=>c.toString()===o);return u>=0?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[s,new l(o)]},rest:{...e,[t.suit]:r.filter((a,m)=>m!==t.index&&m!==u)}}:{status:"failure"}};var E=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u9762\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=E(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t},w=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u5854\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=w(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},I=e=>{let t=[];for(let r of["m","p","s","z"]){let s=e[r];for(let n=0;n<s.length;n++){let i=T(e,"\u5BFE\u5B50",{suit:r,index:n});if(i.status==="failure")continue;let o=I(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},J=e=>e.children.length===0?[{\u30D6\u30ED\u30C3\u30AF:e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF]:[],rest:e.rest}]:e.children.flatMap(J).map(s=>({\u30D6\u30ED\u30C3\u30AF:(e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF,...s.\u30D6\u30ED\u30C3\u30AF]:[...s.\u30D6\u30ED\u30C3\u30AF]).sort((n,i)=>n==null?1:i==null?-1:n.type===i.type?n.component[0].suit===i.component[0].suit?n.component[0].number-i.component[0].number:n.component[0].suit.charCodeAt(0)-i.component[0].suit.charCodeAt(0):n.type==="\u96C0\u982D"?-1:i.type==="\u96C0\u982D"?1:n.type==="\u9762\u5B50"?-1:i.type==="\u9762\u5B50"?1:n.type==="\u5854\u5B50"?-1:i.type==="\u5854\u5B50"?1:0),rest:s.rest})),p=e=>e.flatMap(J).filter((t,r,s)=>{let n=JSON.stringify(t);return s.findIndex(i=>JSON.stringify(i)===n)===r});var B=e=>{let t=[],r=G(e);for(let o of r){let u=p(E(o.rest));if(u.length>0)for(let c of u){let a=p(w(c.rest));for(let m of a){let h=F(o.\u30D6\u30ED\u30C3\u30AF,m);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:c.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:h.\u30D6\u30ED\u30C3\u30AF,rest:h.rest})}}else{let c=p(w(o.rest));for(let a of c){let m=F(o.\u30D6\u30ED\u30C3\u30AF,a);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:[],\u5854\u5B50:m.\u30D6\u30ED\u30C3\u30AF,rest:m.rest})}}}let s=t.map(o=>[y(o),o]),n=Math.min(...s.map(([o])=>o));return s.filter(([o])=>o===n).map(([,o])=>o)},F=(e,t)=>{let r={\u30D6\u30ED\u30C3\u30AF:[],rest:{m:t.rest.m.map(s=>s.clone()),p:t.rest.p.map(s=>s.clone()),s:t.rest.s.map(s=>s.clone()),z:t.rest.z.map(s=>s.clone())}};for(let s of t.\u30D6\u30ED\u30C3\u30AF){let[n,i]=s.component;n.toEqual(i)&&n.toEqual(e.component[0])?(r.rest[n.suit].push(n),r.rest[i.suit].push(i)):r.\u30D6\u30ED\u30C3\u30AF.push(s)}return r},G=e=>{let t=[];for(let n of["m","p","s","z"]){let i=e[n];for(let o=0;o<i.length;o++)t.push(T(e,"\u96C0\u982D",{suit:n,index:o}))}let r=t.filter(n=>n.status==="success");return r.filter((n,i)=>{let o=JSON.stringify(n);return r.findIndex(u=>JSON.stringify(u)===o)===i})};import.meta.vitest&&test("\u96C0\u982D\u62BD\u51FA",()=>{let e=G({m:["1m","1m","1m","2m","3m"].map(t=>new l(t)),p:["4p","5p","6p","6p","9p"].map(t=>new l(t)),s:["3s"].map(t=>new l(t)),z:["1z","1z"].map(t=>new l(t))});expect(e).toMatchSnapshot()});var H=e=>{let t=[],r=p(E(e));if(r.length>0)for(let u of r){let c=p(w(u.rest));for(let a of c)t.push({\u96C0\u982D:null,\u9762\u5B50:u.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:a.\u30D6\u30ED\u30C3\u30AF,rest:a.rest})}else{let u=p(w(e));for(let c of u)t.push({\u96C0\u982D:null,\u9762\u5B50:[],\u5854\u5B50:c.\u30D6\u30ED\u30C3\u30AF,rest:c.rest})}let n=t.filter(u=>!u.\u5854\u5B50.some(c=>rt(...c.component))).map(u=>[y(u),u]),i=Math.min(...n.map(([u])=>u));return n.filter(([u])=>u===i).map(([,u])=>u)},rt=(e,t)=>e.toEqual(t);var K=e=>{let t=p(I(e))[0];if(t===void 0)return{\u5BFE\u5B50:[],rest:e};let r=t.\u30D6\u30ED\u30C3\u30AF.findIndex((s,n,i)=>i.findIndex(o=>s.component[0].toString()===o.component[0].toString())!==n);if(r!==-1){let s=t.\u30D6\u30ED\u30C3\u30AF[r];if(s===void 0)throw new Error("duplicated\u5BFE\u5B50 is undefined");t.\u30D6\u30ED\u30C3\u30AF.splice(r,1),t.rest[s.component[0].suit].push(s.component[0]),t.rest[s.component[1].suit].push(s.component[1])}return{\u5BFE\u5B50:t.\u30D6\u30ED\u30C3\u30AF,rest:t.rest}},Q=e=>{let t=[],r=[],s={m:[],p:[],s:[],z:[]};for(let n of["m","p","s"])for(let i of e[n])i.number===1||i.number===9?t.find(o=>o.toString()===i.toString())?r.push(i):t.push(i):s[n].push(i);for(let n of e.z)t.find(i=>i.toString()===n.toString())?r.push(n):t.push(n);return{\u4E48\u4E5D\u724Cunique:t,\u4E48\u4E5D\u724Crest:r,rest:s}};var j=(e,t)=>{let r=new Map(e.map(s=>[s.toString(),{\u724C:s,remains:4}]));for(let s of t){let n=r.get(s.toString());n&&(n.remains-=1)}return r};import.meta.vitest&&test("\u5168\u67AF\u308C",()=>{let e=j([new l("1m")],[new l("1m"),new l("1m"),new l("1m"),new l("1m")]);expect(e.get("1m")).toEqual({\u724C:new l("1m"),remains:0})});var g=e=>e.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0)),v=e=>g(e).filter((t,r,s)=>{if(r===0)return!0;let n=s[r-1];if(n===void 0)throw new Error("arr[i-1] is undefined");return!t.toEqual(n)});var S=new Map,st=(e,t)=>{if(S.set(e,t),S.size>3){let r=Array.from(S.keys());r[0]&&S.delete(r[0])}},L=(e,t)=>{let r=nt(e),s=Math.min(r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570),n=[];s===r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r._5\u30D6\u30ED\u30C3\u30AF.\u6709\u52B9\u724C),s===r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r.\u4E03\u5BFE\u5B50.\u6709\u52B9\u724C),s===r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&n.push(...r.\u56FD\u58EB\u7121\u53CC.\u6709\u52B9\u724C);let i=v(n),o=j(i,t);return{analysisResult:r,\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u6709\u52B9\u724C:i,remaining\u6709\u52B9\u724Cnum:o}},nt=e=>{let t=e.m.map(n=>n.toString()).join("")+e.p.map(n=>n.toString()).join("")+e.s.map(n=>n.toString()).join("")+e.z.map(n=>n.toString()).join(""),r=S.get(t);if(r)return r;let s={_5\u30D6\u30ED\u30C3\u30AF:it(e),\u4E03\u5BFE\u5B50:ot(e),\u56FD\u58EB\u7121\u53CC:ut(e)};return st(t,s),s},it=e=>{let t=B(e),r=H(e),s=t.length+r.length===0?8:Math.min(...[...t,...r].map(u=>y(u))),i=[...t,...r].filter(u=>y(u)===s).map(u=>({\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u30D6\u30ED\u30C3\u30AF:u,\u6709\u52B9\u724C:_(u,s)})),o=i.flatMap(u=>u.\u6709\u52B9\u724C).filter((u,c,a)=>a.findIndex(m=>m.suit===u.suit&&m.number===u.number)===c).sort((u,c)=>u.suit===c.suit?u.number-c.number:u.suit.charCodeAt(0)-c.suit.charCodeAt(0));return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:s,\u6709\u52B9\u724C:o,indivisuals:i}},ot=e=>{let t=K(e),r=P(t),s=N(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:s}},ut=e=>{let t=Q(e),r=D(t),s=k(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:s}};var lt=e=>(e.length===1||e.length===4||e.length===7||e.length===10||e.length===13)&&e.every(t=>t instanceof l),A=class{\u666E\u901A;\u526F\u9732=[];\u30C4\u30E2=null;analysisResult13=null;analysisResult14=null;constructor(t,r){if(typeof t=="string"){if(!/^[1-9mpsz]+$/.test(t))throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");if(!/[0-9]/.test(t))throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");let s=t.match(/\d+[mpsz]/g);if(!s)throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");let n=[];for(let i of s){let o=i.slice(-1);if(!(o==="z"||o==="m"||o==="p"||o==="s"))throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");let u=i.slice(0,-1);for(let c of u){let a=`${c}${o}`;if(!f(a))throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");n.push(new l(a))}}if(!lt(n))throw new Error("\u624B\u724C\u306E\u6587\u5B57\u5217\u304C\u4E0D\u6B63\u3067\u3059");this.\u666E\u901A=n}else this.\u666E\u901A=t;r&&(this.\u526F\u9732=r),this.sort(),this.analyze13()}sort(){this.\u666E\u901A.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0))}\u30DE\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="m")}\u30D4\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="p")}\u30BD\u30FC\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="s")}\u5B57\u724C(){return this.\u666E\u901A.filter(t=>t.suit==="z")}toString\u666E\u901A(){return this.\u666E\u901A.map(t=>t.toString()).join("")}do\u30C4\u30E2(t){this.\u30C4\u30E2=t,this.analyze14()}do\u526F\u9732(t){if(this.\u526F\u9732.length===4)throw new Error("\u526F\u9732\u3067\u304D\u308B\u306E\u306F4\u56DE\u307E\u3067");for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");if(!this.\u666E\u901A.some(s=>s.toEqual(r)))throw new Error(`\u624B\u724C\u306B ${r} \u304C\u306A\u3044\u306E\u306B\u526F\u9732\u3057\u3088\u3046\u3068\u3057\u305F`)}this.\u526F\u9732=[...this.\u526F\u9732,t];for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");let s=this.\u666E\u901A.findIndex(n=>n.toEqual(r));this.\u666E\u901A.splice(s,1)}this.analyze14({is\u526F\u9732\u5F8C:!0})}do\u6253\u724C(t){switch(t.type){case"\u30C4\u30E2\u5207\u308A":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");this.\u30C4\u30E2=null;break}case"\u30C4\u30E2\u5F8C\u624B\u51FA\u3057":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");let r=this.\u666E\u901A.findIndex(s=>s.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1,this.\u30C4\u30E2),this.\u30C4\u30E2=null,this.sort();break}case"\u526F\u9732\u5F8C\u624B\u51FA\u3057":{let r=this.\u666E\u901A.findIndex(s=>s.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1),this.\u30C4\u30E2=null,this.sort();break}default:throw new Error(`invalid \u6253\u724C.type: ${t}`)}this.analyze13()}getAnalysisResult13(){return this.analysisResult13}getAnalysisResult14(){return this.analysisResult14}\u724CList(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return this.\u30C4\u30E2&&t.push(this.\u30C4\u30E2),g(t)}\u724CListExcludes\u30C4\u30E2(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return g(t)}analyze13(){let t=L({m:this.\u30DE\u30F3\u30BA(),p:this.\u30D4\u30F3\u30BA(),s:this.\u30BD\u30FC\u30BA(),z:this.\u5B57\u724C()},this.\u724CList());return this.analysisResult14=null,this.analysisResult13=t,this.analysisResult13}analyze14({is\u526F\u9732\u5F8C:t}={is\u526F\u9732\u5F8C:!1}){let r=(()=>{if(t)return this.\u666E\u901A;if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B analyze14 \u3057\u3088\u3046\u3068\u3057\u305F");return g([...this.\u666E\u901A,this.\u30C4\u30E2])})(),s=v(r),n=new Map;for(let i of s){let o=r.findIndex(u=>u.toEqual(i));n.set(i.toString(),{\u6253\u724C:i,analysisResult:L(ct(r.toSpliced(o,1)),this.\u724CList())})}return this.analysisResult13=null,this.analysisResult14=n,this.analysisResult14}},ct=e=>{let t={m:[],p:[],s:[],z:[]};for(let r of e)t[r.suit].push(r);return t};export{q as \u526F\u9732,A as \u624B\u724C,l as \u724C};
//# sourceMappingURL=index.js.map