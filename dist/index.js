var q=class{call;called\u724C;other\u724C;from;constructor({call:t,called\u724C:r,other\u724C:n,from:s}){this.call=t,this.called\u724C=r,this.other\u724C=n,this.from=s}to\u724CList(){return this.other\u724C[2]?[this.called\u724C,this.other\u724C[0],this.other\u724C[1],this.other\u724C[2]]:[this.called\u724C,this.other\u724C[0],this.other\u724C[1]]}};var l=class e{suit;number;is\u8D64\u724C;str\u724C;constructor(t,r=!1){let{suit:n,number:s}=U(t);this.suit=n,this.number=s,this.is\u8D64\u724C=n==="z"?!1:s===5&&r,this.str\u724C=t}toString(){return this.str\u724C}toEqual(t){return this.str\u724C===t.str\u724C}clone(){return new e(this.str\u724C,this.is\u8D64\u724C)}},U=e=>{if(e.length!==2)throw new Error(`invalid signature ${e}: length must be 2.`);let t=Number(e[0]),r=e[1],n=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,s=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6, 7, 8 or 9.`,i=`invalid signature ${e}: number must be 1, 2, 3, 4, 5, 6 or 7.`;if(!Number.isInteger(t))throw new Error(n);if(r===void 0||!["m","p","s","z"].includes(r))throw new Error(`invalid signature ${e}: suit must be "m", "p", "s" or "z".`);if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))throw new Error(s);return{suit:r,number:t}}if(!(1<=t&&t<=7))throw new Error(i);return{suit:r,number:t}},f=e=>{if(e.length!==2)return!1;let t=Number(e[0]),r=e[1];if(!Number.isInteger(t)||r===void 0||!["m","p","s","z"].includes(r))return!1;if(["m","p","s"].includes(r)){if(!(1<=t&&t<=9))return!1}else if(!(1<=t&&t<=7))return!1;return!0};var _=[new l("1m"),new l("2m"),new l("3m"),new l("4m"),new l("5m"),new l("6m"),new l("7m"),new l("8m"),new l("9m"),new l("1p"),new l("2p"),new l("3p"),new l("4p"),new l("5p"),new l("6p"),new l("7p"),new l("8p"),new l("9p"),new l("1s"),new l("2s"),new l("3s"),new l("4s"),new l("5s"),new l("6s"),new l("7s"),new l("8s"),new l("9s"),new l("1z"),new l("2z"),new l("3z"),new l("4z"),new l("5z"),new l("6z"),new l("7z")];var R=e=>{switch(e){case 1:return 1;case 4:return 2;case 7:return 3;case 10:return 4;case 13:return 5;default:throw new Error(`invalid count\u724C: ${e}`)}};var b=e=>{let t=0;return e.\u96C0\u982D&&(t+=2),t+=e.\u9762\u5B50.length*3,t+=e.\u5854\u5B50.length*2,t+=d(e.rest).length,t};var x=e=>e.component[0].toEqual(e.component[1])&&e.component[0].toEqual(e.component[2]);var N=(e,t)=>t===0?V(e):W(e),k=e=>{let t=[];for(let r of d(e.rest))e.\u5BFE\u5B50.some(n=>n.component.some(s=>s.toEqual(r)))||t.push(r.clone());return t},C=e=>{let t=["1m","9m","1p","9p","1s","9s","1z","2z","3z","4z","5z","6z","7z"].map(r=>new l(r));return e.\u4E48\u4E5D\u724Crest.length===0?t:t.filter(r=>!e.\u4E48\u4E5D\u724Cunique.some(n=>n.toEqual(r)))},V=e=>{if(e.\u5854\u5B50.length>=2)throw new Error("\u5854\u5B50\u304C2\u500B\u4EE5\u4E0A\u3042\u308B\u5834\u5408\u306F\u8074\u724C\u3067\u306F\u306A\u3044");if(e.\u96C0\u982D){if(e.\u5854\u5B50[0]===void 0)throw new Error("\u96C0\u982D\u304C\u3042\u3063\u3066\u5854\u5B50\u304C\u306A\u3044\u5834\u5408\u306F\u30C6\u30F3\u30D1\u30A4\u3067\u306F\u306A\u3044");return j(e.\u5854\u5B50[0])}let t=d(e.rest)[0];if(t===void 0)throw new Error(`invalid rest: ${e.rest}`);let r=t.toString();return[new l(r)]},W=e=>{let t=[],r=R(b(e))-1,n=e.\u9762\u5B50.length+e.\u5854\u5B50.length;for(let o of e.\u5854\u5B50)t.push(...j(o));let s=d(e.rest);if(n<r){for(let o of s)t.push(...X(o,e.\u96C0\u982D,e.\u9762\u5B50));e.\u96C0\u982D&&!s.some(o=>e.\u96C0\u982D?.component[0].toEqual(o))&&t.push(e.\u96C0\u982D.component[0].clone())}if(!e.\u96C0\u982D){let o=O(e.\u9762\u5B50);if(n===r)s.every(u=>z(u,null,e.\u9762\u5B50))?t.push(..._.filter(u=>o.every(c=>!c.component[0].toEqual(u)))):t.push(...s.filter(u=>!z(u,e.\u96C0\u982D,e.\u9762\u5B50)));else if(n>r)for(let u of e.\u5854\u5B50)t.push(...u.component.filter(c=>o.every(m=>!m.component[0].toEqual(c))).map(c=>c.clone()))}return t.filter((o,u)=>t.findIndex(c=>c.toEqual(o))===u).sort((o,u)=>o.suit===u.suit?o.number-u.number:o.suit.charCodeAt(0)-u.suit.charCodeAt(0))},d=e=>Object.values(e).flat(),j=e=>{let[t,r]=e.component;switch(!0){case t.number===r.number:return[t.clone()];case(t.number===1&&r.number===2):return[new l(`3${t.suit}`)];case(t.number===8&&r.number===9):return[new l(`7${t.suit}`)];case t.number===r.number-2:{let n=`${t.number+1}${t.suit}`;if(!f(n))throw new Error(`invalid \u724Cstr: ${n}`);return[new l(n)]}case t.number===r.number-1:{let n=`${t.number-1}${t.suit}`,s=`${r.number+1}${r.suit}`;if(!f(n))throw new Error(`invalid \u724Cstr: ${n}`);if(!f(s))throw new Error(`invalid \u724Cstr: ${s}`);return[new l(n),new l(s)]}default:throw new Error(`invalid \u5854\u5B50: ${e.component[0].toString()} ${e.component[1].toString()}`)}},X=(e,t,r)=>{let n=[1,2,3,4,5,6,7,8,9],s=O(r);switch(e.suit){case"m":case"p":case"s":{let i=n.indexOf(e.number),o=Math.max(0,i-2),u=Math.min(8,i+2);return n.slice(o,u+1).map(m=>{let a=`${m}${e.suit}`;if(!f(a))throw new Error(`invalid str: ${a}`);return new l(a)}).filter(m=>!(m.toEqual(e)&&z(m,t,s)))}case"z":return z(e,t,s)?[]:[e.clone()]}};function z(e,t,r){return!!(t?.component[0].toEqual(e)||r.filter(n=>x(n)).some(n=>n.component[0].toEqual(e)))}function O(e){return e.filter(t=>x(t))}var w=e=>{let t=R(b(e)),r=t-1,{\u96C0\u982D:n,\u9762\u5B50:s,\u5854\u5B50:i,rest:o}=e,u=d(o),c=8;if(c-=(5-t)*2,c-=s.length*2,c-=i.length,c-=n?1:0,s.length+i.length>=t&&(c+=1),n&&i.some(m=>m.component[0].toEqual(m.component[1])&&m.component[0].toEqual(n.component[0]))&&(c+=1),!n&&s.length+i.length===r){let m=s.filter(a=>x(a));u.every(a=>m.some(h=>h.component[0].toEqual(a)))&&(c+=1)}return c},P=e=>{let t=6-e.\u5BFE\u5B50.length,r=d(e.rest).filter((n,s,i)=>i.findIndex(o=>o.toString()===n.toString())===s);for(let n of r)e.\u5BFE\u5B50.some(s=>s.component[0].toEqual(n))&&(t+=1);return t},D=e=>e.\u4E48\u4E5D\u724Crest.length===0?13-e.\u4E48\u4E5D\u724Cunique.length:12-e.\u4E48\u4E5D\u724Cunique.length;var T=(e,t,r)=>{Y(e);let{suit:n,index:s}=r;switch(t){case"\u96C0\u982D":{let i=e[n][s],o=e[n][s+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u96C0\u982D",component:[i,o]},rest:{...e,[n]:e[n].filter((m,a)=>a!==s&&a!==s+1)}}:{status:"failure"}:{status:"failure"}}case"\u9762\u5B50":{let i=e[n][s],o=e[n][s+1],u=e[n][s+2];return i&&o&&u?Z(i,o,u)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u9762\u5B50",component:[i,o,u]},rest:{...e,[n]:e[n].filter((a,h)=>h!==s&&h!==s+1&&h!==s+2)}}:tt(e,r):{status:"failure"}}case"\u5854\u5B50":{let i=e[n][s],o=e[n][s+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[i,o]},rest:{...e,[n]:e[n].filter((m,a)=>a!==s&&a!==s+1)}}:et(e,r):{status:"failure"}}case"\u5BFE\u5B50":{let i=e[n][s],o=e[n][s+1];return i&&o?$(i,o)?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5BFE\u5B50",component:[i,o]},rest:{...e,[n]:e[n].filter((m,a)=>a!==s&&a!==s+1)}}:{status:"failure"}:{status:"failure"}}default:throw new Error(`invalid type: ${t}`)}},Y=e=>{if(!e.m.every(t=>t.suit==="m"))throw new Error(`invalid type in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.suit==="p"))throw new Error(`invalid type in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.suit==="s"))throw new Error(`invalid type in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.suit==="z"))throw new Error(`invalid type in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`);if(!e.m.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.m". received: ${e.m.map(t=>t.toString()).join()}`);if(!e.p.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.p". received: ${e.p.map(t=>t.toString()).join()}`);if(!e.s.every(t=>t.number>=1&&t.number<=9))throw new Error(`invalid number in "\u624B\u724C.s". received: ${e.s.map(t=>t.toString()).join()}`);if(!e.z.every(t=>t.number>=1&&t.number<=7))throw new Error(`invalid number in "\u624B\u724C.z". received: ${e.z.map(t=>t.toString()).join()}`)},$=(e,t)=>e.toEqual(t),Z=(e,t,r)=>e.suit===t.suit&&t.suit===r.suit&&e.number===t.number&&t.number===r.number;var tt=(e,t)=>{let r=e[t.suit],n=r[t.index];if(n===void 0)return{status:"failure"};if(n.suit==="z")return{status:"failure"};if(n.number===8||n.number===9)return{status:"failure"};let s=`${n.number+1}${n.suit}`,i=`${n.number+2}${n.suit}`;if(!(f(s)&&f(i)))return{status:"failure"};let o={type:"\u9762\u5B50",component:[n,new l(s),new l(i)]},u=r.findIndex(m=>m.toString()===s),c=r.findIndex(m=>m.toString()===i);return u===-1||c===-1?{status:"failure"}:{status:"success",\u30D6\u30ED\u30C3\u30AF:o,rest:{...e,[t.suit]:r.filter((m,a)=>a!==t.index&&a!==u&&a!==c)}}},et=(e,t)=>{let r=e[t.suit],n=r[t.index];if(n===void 0)return{status:"failure"};if(n.suit==="z")return{status:"failure"};if(n.number===9)return{status:"failure"};let s=`${n.number+1}${n.suit}`;if(!f(s))return{status:"failure"};let i=r.findIndex(c=>c.toString()===s);if(i>=0)return{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[n,new l(s)]},rest:{...e,[t.suit]:r.filter((m,a)=>a!==t.index&&a!==i)}};let o=`${n.number+2}${n.suit}`;if(!f(o))return{status:"failure"};let u=r.findIndex(c=>c.toString()===o);return u>=0?{status:"success",\u30D6\u30ED\u30C3\u30AF:{type:"\u5854\u5B50",component:[n,new l(o)]},rest:{...e,[t.suit]:r.filter((m,a)=>a!==t.index&&a!==u)}}:{status:"failure"}};var E=e=>{let t=[];for(let r of["m","p","s","z"]){let n=e[r];for(let s=0;s<n.length;s++){let i=T(e,"\u9762\u5B50",{suit:r,index:s});if(i.status==="failure")continue;let o=E(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t},y=e=>{let t=[];for(let r of["m","p","s","z"]){let n=e[r];for(let s=0;s<n.length;s++){let i=T(e,"\u5854\u5B50",{suit:r,index:s});if(i.status==="failure")continue;let o=y(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},I=e=>{let t=[];for(let r of["m","p","s","z"]){let n=e[r];for(let s=0;s<n.length;s++){let i=T(e,"\u5BFE\u5B50",{suit:r,index:s});if(i.status==="failure")continue;let o=I(i.rest);t.push({\u30D6\u30ED\u30C3\u30AF:i.\u30D6\u30ED\u30C3\u30AF,rest:i.rest,children:o})}}return t.length===0?[{\u30D6\u30ED\u30C3\u30AF:null,rest:e,children:[]}]:t},J=e=>e.children.length===0?[{\u30D6\u30ED\u30C3\u30AF:e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF]:[],rest:e.rest}]:e.children.flatMap(J).map(n=>({\u30D6\u30ED\u30C3\u30AF:(e.\u30D6\u30ED\u30C3\u30AF?[e.\u30D6\u30ED\u30C3\u30AF,...n.\u30D6\u30ED\u30C3\u30AF]:[...n.\u30D6\u30ED\u30C3\u30AF]).sort((s,i)=>s==null?1:i==null?-1:s.type===i.type?s.component[0].suit===i.component[0].suit?s.component[0].number-i.component[0].number:s.component[0].suit.charCodeAt(0)-i.component[0].suit.charCodeAt(0):s.type==="\u96C0\u982D"?-1:i.type==="\u96C0\u982D"?1:s.type==="\u9762\u5B50"?-1:i.type==="\u9762\u5B50"?1:s.type==="\u5854\u5B50"?-1:i.type==="\u5854\u5B50"?1:0),rest:n.rest})),p=e=>e.flatMap(J).filter((t,r,n)=>{let s=JSON.stringify(t);return n.findIndex(i=>JSON.stringify(i)===s)===r});var B=e=>{let t=[],r=G(e);for(let o of r){let u=p(E(o.rest));if(u.length>0)for(let c of u){let m=p(y(c.rest));for(let a of m){let h=F(o.\u30D6\u30ED\u30C3\u30AF,a);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:c.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:h.\u30D6\u30ED\u30C3\u30AF,rest:h.rest})}}else{let c=p(y(o.rest));for(let m of c){let a=F(o.\u30D6\u30ED\u30C3\u30AF,m);t.push({\u96C0\u982D:o.\u30D6\u30ED\u30C3\u30AF,\u9762\u5B50:[],\u5854\u5B50:a.\u30D6\u30ED\u30C3\u30AF,rest:a.rest})}}}let n=t.map(o=>[w(o),o]),s=Math.min(...n.map(([o])=>o));return n.filter(([o])=>o===s).map(([,o])=>o)},F=(e,t)=>{let r={\u30D6\u30ED\u30C3\u30AF:[],rest:{m:t.rest.m.map(n=>n.clone()),p:t.rest.p.map(n=>n.clone()),s:t.rest.s.map(n=>n.clone()),z:t.rest.z.map(n=>n.clone())}};for(let n of t.\u30D6\u30ED\u30C3\u30AF){let[s,i]=n.component;s.toEqual(i)&&s.toEqual(e.component[0])?(r.rest[s.suit].push(s),r.rest[i.suit].push(i)):r.\u30D6\u30ED\u30C3\u30AF.push(n)}return r},G=e=>{let t=[];for(let s of["m","p","s","z"]){let i=e[s];for(let o=0;o<i.length;o++)t.push(T(e,"\u96C0\u982D",{suit:s,index:o}))}let r=t.filter(s=>s.status==="success");return r.filter((s,i)=>{let o=JSON.stringify(s);return r.findIndex(u=>JSON.stringify(u)===o)===i})};import.meta.vitest&&test("\u96C0\u982D\u62BD\u51FA",()=>{let e=G({m:["1m","1m","1m","2m","3m"].map(t=>new l(t)),p:["4p","5p","6p","6p","9p"].map(t=>new l(t)),s:["3s"].map(t=>new l(t)),z:["1z","1z"].map(t=>new l(t))});expect(e).toMatchSnapshot()});var H=e=>{let t=[],r=p(E(e));if(r.length>0)for(let u of r){let c=p(y(u.rest));for(let m of c)t.push({\u96C0\u982D:null,\u9762\u5B50:u.\u30D6\u30ED\u30C3\u30AF,\u5854\u5B50:m.\u30D6\u30ED\u30C3\u30AF,rest:m.rest})}else{let u=p(y(e));for(let c of u)t.push({\u96C0\u982D:null,\u9762\u5B50:[],\u5854\u5B50:c.\u30D6\u30ED\u30C3\u30AF,rest:c.rest})}let s=t.filter(u=>!u.\u5854\u5B50.some(c=>rt(...c.component))).map(u=>[w(u),u]),i=Math.min(...s.map(([u])=>u));return s.filter(([u])=>u===i).map(([,u])=>u)},rt=(e,t)=>e.toEqual(t);var K=e=>{let t=p(I(e))[0];if(t===void 0)return{\u5BFE\u5B50:[],rest:e};let r=t.\u30D6\u30ED\u30C3\u30AF.findIndex((n,s,i)=>i.findIndex(o=>n.component[0].toString()===o.component[0].toString())!==s);if(r!==-1){let n=t.\u30D6\u30ED\u30C3\u30AF[r];if(n===void 0)throw new Error("duplicated\u5BFE\u5B50 is undefined");t.\u30D6\u30ED\u30C3\u30AF.splice(r,1),t.rest[n.component[0].suit].push(n.component[0]),t.rest[n.component[1].suit].push(n.component[1])}return{\u5BFE\u5B50:t.\u30D6\u30ED\u30C3\u30AF,rest:t.rest}},Q=e=>{let t=[],r=[],n={m:[],p:[],s:[],z:[]};for(let s of["m","p","s"])for(let i of e[s])i.number===1||i.number===9?t.find(o=>o.toString()===i.toString())?r.push(i):t.push(i):n[s].push(i);for(let s of e.z)t.find(i=>i.toString()===s.toString())?r.push(s):t.push(s);return{\u4E48\u4E5D\u724Cunique:t,\u4E48\u4E5D\u724Crest:r,rest:n}};var L=(e,t)=>{let r=new Map(e.map(n=>[n.toString(),{\u724C:n,remains:4}]));for(let n of t){let s=r.get(n.toString());s&&(s.remains-=1)}return r};import.meta.vitest&&test("\u5168\u67AF\u308C",()=>{let e=L([new l("1m")],[new l("1m"),new l("1m"),new l("1m"),new l("1m")]);expect(e.get("1m")).toEqual({\u724C:new l("1m"),remains:0})});var g=e=>e.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0)),v=e=>g(e).filter((t,r,n)=>{if(r===0)return!0;let s=n[r-1];if(s===void 0)throw new Error("arr[i-1] is undefined");return!t.toEqual(s)});var S=new Map,nt=(e,t)=>{if(S.set(e,t),S.size>3){let r=Array.from(S.keys());r[0]&&S.delete(r[0])}},A=(e,t)=>{let r=st(e),n=Math.min(r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570,r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570),s=[];n===r._5\u30D6\u30ED\u30C3\u30AF.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&s.push(...r._5\u30D6\u30ED\u30C3\u30AF.\u6709\u52B9\u724C),n===r.\u4E03\u5BFE\u5B50.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&s.push(...r.\u4E03\u5BFE\u5B50.\u6709\u52B9\u724C),n===r.\u56FD\u58EB\u7121\u53CC.\u30B7\u30E3\u30F3\u30C6\u30F3\u6570&&s.push(...r.\u56FD\u58EB\u7121\u53CC.\u6709\u52B9\u724C);let i=v(s),o=L(i,t);return{analysisResult:r,\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:n,\u6709\u52B9\u724C:i,remaining\u6709\u52B9\u724Cnum:o}},st=e=>{let t=e.m.map(s=>s.toString()).join("")+e.p.map(s=>s.toString()).join("")+e.s.map(s=>s.toString()).join("")+e.z.map(s=>s.toString()).join(""),r=S.get(t);if(r)return r;let n={_5\u30D6\u30ED\u30C3\u30AF:it(e),\u4E03\u5BFE\u5B50:ot(e),\u56FD\u58EB\u7121\u53CC:ut(e)};return nt(t,n),n},it=e=>{let t=B(e),r=H(e),n=t.length+r.length===0?8:Math.min(...[...t,...r].map(u=>w(u))),i=[...t,...r].filter(u=>w(u)===n).map(u=>({\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:n,\u30D6\u30ED\u30C3\u30AF:u,\u6709\u52B9\u724C:N(u,n)})),o=i.flatMap(u=>u.\u6709\u52B9\u724C).filter((u,c,m)=>m.findIndex(a=>a.suit===u.suit&&a.number===u.number)===c).sort((u,c)=>u.suit===c.suit?u.number-c.number:u.suit.charCodeAt(0)-c.suit.charCodeAt(0));return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:n,\u6709\u52B9\u724C:o,indivisuals:i}},ot=e=>{let t=K(e),r=P(t),n=k(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:n}},ut=e=>{let t=Q(e),r=D(t),n=C(t);return{\u30B7\u30E3\u30F3\u30C6\u30F3\u6570:r,\u6709\u52B9\u724C:n}};var M=class{\u666E\u901A;\u526F\u9732=[];\u30C4\u30E2=null;analysisResult13=null;analysisResult14=null;constructor(t,r){this.\u666E\u901A=t,r&&(this.\u526F\u9732=r),this.sort(),this.analyze13()}sort(){this.\u666E\u901A.sort((t,r)=>t.suit===r.suit?t.number-r.number:t.suit.charCodeAt(0)-r.suit.charCodeAt(0))}\u30DE\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="m")}\u30D4\u30F3\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="p")}\u30BD\u30FC\u30BA(){return this.\u666E\u901A.filter(t=>t.suit==="s")}\u5B57\u724C(){return this.\u666E\u901A.filter(t=>t.suit==="z")}toString\u666E\u901A(){return this.\u666E\u901A.map(t=>t.toString()).join("")}do\u30C4\u30E2(t){this.\u30C4\u30E2=t,this.analyze14()}do\u526F\u9732(t){if(this.\u526F\u9732.length===4)throw new Error("\u526F\u9732\u3067\u304D\u308B\u306E\u306F4\u56DE\u307E\u3067");for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");if(!this.\u666E\u901A.some(n=>n.toEqual(r)))throw new Error(`\u624B\u724C\u306B ${r} \u304C\u306A\u3044\u306E\u306B\u526F\u9732\u3057\u3088\u3046\u3068\u3057\u305F`)}this.\u526F\u9732=[...this.\u526F\u9732,t];for(let r of t.other\u724C){if(r===void 0)throw new Error("\u526F\u9732\u306E\u307B\u304B\u306E\u724C\u306B undefined \u304C\u542B\u307E\u308C\u3066\u3044\u308B");let n=this.\u666E\u901A.findIndex(s=>s.toEqual(r));this.\u666E\u901A.splice(n,1)}this.analyze14({is\u526F\u9732\u5F8C:!0})}do\u6253\u724C(t){switch(t.type){case"\u30C4\u30E2\u5207\u308A":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");this.\u30C4\u30E2=null;break}case"\u30C4\u30E2\u5F8C\u624B\u51FA\u3057":{if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F");let r=this.\u666E\u901A.findIndex(n=>n.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1,this.\u30C4\u30E2),this.\u30C4\u30E2=null,this.sort();break}case"\u526F\u9732\u5F8C\u624B\u51FA\u3057":{let r=this.\u666E\u901A.findIndex(n=>n.toEqual(t.\u724C));if(r===-1)throw new Error(`\u624B\u724C\u306B ${t.\u724C} \u304C\u306A\u3044\u306E\u306B\u6253\u724C\u3057\u3088\u3046\u3068\u3057\u305F`);this.\u666E\u901A.splice(r,1),this.\u30C4\u30E2=null,this.sort();break}default:throw new Error(`invalid \u6253\u724C.type: ${t}`)}this.analyze13()}getAnalysisResult13(){return this.analysisResult13}getAnalysisResult14(){return this.analysisResult14}\u724CList(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return this.\u30C4\u30E2&&t.push(this.\u30C4\u30E2),g(t)}\u724CListExcludes\u30C4\u30E2(){let t=[...this.\u666E\u901A,...this.\u526F\u9732.flatMap(r=>r.to\u724CList())];return g(t)}analyze13(){let t=A({m:this.\u30DE\u30F3\u30BA(),p:this.\u30D4\u30F3\u30BA(),s:this.\u30BD\u30FC\u30BA(),z:this.\u5B57\u724C()},this.\u724CList());return this.analysisResult14=null,this.analysisResult13=t,this.analysisResult13}analyze14({is\u526F\u9732\u5F8C:t}={is\u526F\u9732\u5F8C:!1}){let r=(()=>{if(t)return this.\u666E\u901A;if(this.\u30C4\u30E2===null)throw new Error("\u30C4\u30E2\u3057\u3066\u3044\u306A\u3044\u306E\u306B analyze14 \u3057\u3088\u3046\u3068\u3057\u305F");return g([...this.\u666E\u901A,this.\u30C4\u30E2])})(),n=v(r),s=new Map;for(let i of n){let o=r.findIndex(u=>u.toEqual(i));s.set(i.toString(),{\u6253\u724C:i,analysisResult:A(lt(r.toSpliced(o,1)),this.\u724CList())})}return this.analysisResult13=null,this.analysisResult14=s,this.analysisResult14}},lt=e=>{let t={m:[],p:[],s:[],z:[]};for(let r of e)t[r.suit].push(r);return t};export{q as \u526F\u9732,M as \u624B\u724C,l as \u724C};
//# sourceMappingURL=index.js.map